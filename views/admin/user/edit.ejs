<%- include('../../layout/header') -%>
<div class="container-fluid">
  <h1>แก้ไขผู้ใช้งาน - <%= user.name %></h1>
  <div class="card">
    <div class="card-header">
      โปรดกรอกข้อมูลให้ครบถ้วน
    </div>
    <div class="card-body">
      <% if(messages.errors){ var errors = messages.errors; %>
      <div class="alert alert-danger">
        <h5>เกิดข้อผิดพลาดขณะบันทึกข้อมูลดังนี้</h5>
        <ul>
          <% Object.keys(errors[0]).forEach(key => { %>
          <li><%= errors[0][key] %></li>
          <% }) %>
        </ul>
      </div>
      %> <% } %>
      <form
        action="/admin/user/update/<%= user.id %>"
        enctype="multipart/form-data"
        role="form"
        method="POST"
      >
        <img src="<%= user.avatar %>" alt="<%= user.name %>" width="150" />
        <div class="form-group">
          <label for="inputAvatar" class="mt-3"
            >รูปประจำตัว * เว้นไว้หากไม่ต้องการเปลี่ยน</label
          ><br />
          <input type="file" accept="image/*" name="avatar" id="inputAvatar" />
        </div>
        <div class="form-group">
          <label for="selectRole">สิทธิ์</label>
          <select class="form-control" name="role_id">
            <% roles.map(role => { %>
            <option value="<%= role.id %>"><%= role.name %></option>
            <% }) %>
          </select>
        </div>
        <div class="form-group">
          <label for="inputUsername">ชื่อผู้ใช้</label>
          <input
            type="text"
            name="username"
            required
            value="<%= user.username %>"
            class="form-control"
            id="inputUsername"
            placeholder="กรอกชื่อผู้ใช้งาน"
          />
        </div>
        <div class="form-group">
          <label for="inputName">ชื่่อ - สกุล</label>
          <input
            type="text"
            name="name"
            required
            value="<%= user.name %>"
            class="form-control"
            id="inputName"
            placeholder="กรอกชื่อ-สกุล"
          />
        </div>
        <div class="form-group">
          <label for="inputEmail">อีเมล์</label>
          <input
            type="email"
            name="email"
            required
            value="<%= user.email %>"
            class="form-control"
            id="inputEmail"
            placeholder="กรอกอีเมล์"
          />
        </div>
        <div class="p-3 mb-4" style="border: 1px dashed; border-radius: 5px">
          <p>เว้นไว้หากไม่ต้องการเปลี่ยนรหัสผ่าน</p>
          <div class="form-group">
            <label for="inputPassword">รหัสผ่าน</label>
            <input
              type="password"
              name="password"
              value=""
              class="form-control"
              id="inputPassword"
              placeholder="กรอกรหัสผ่าน"
            />
          </div>
          <div class="form-group">
            <label for="inputPasswordConfirmation">ยืนยันรหัสผ่าน</label>
            <input
              type="password"
              name="password_confirmation"
              value=""
              class="form-control"
              id="inputPasswordConfirmation"
              placeholder="กรอกรหัสผ่านยืนยัน"
            />
          </div>
        </div>
        <button type="submit" class="btn  btn-primary">
          <i class="fa fa-save"></i> บันทึก
        </button>
      </form>
    </div>
  </div>
</div>
<%- include('../../layout/footer') -%> <%- include('../../layout/end') -%>
